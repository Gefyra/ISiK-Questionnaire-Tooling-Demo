import"./main-3C7Y8jW-.js";const m=t=>document.getElementById(t);function g(t){return new URLSearchParams(window.location.search).get(t)}function y(){const t=g("k");if(!t)return{error:"Kein SchlÃ¼ssel (k) in URL gefunden."};try{const e=localStorage.getItem(t);if(!e)return{error:"Keine Exportdaten im localStorage gefunden."};const r=JSON.parse(e);try{localStorage.removeItem(t)}catch{}return{data:r}}catch(e){return{error:"Fehler beim Laden/Parsen der Exportdaten: "+e.message}}}function f(t){try{return JSON.stringify(t,null,2)}catch{return String(t)}}function C(t){const e=m("tabs");if(!e)return;e.replaceChildren();const r=document.createElement("div");r.className="tab-list";const s=document.createElement("div");s.className="tab-panels";const c=n=>"tab-"+n;t.forEach((n,a)=>{const d=document.createElement("button");d.className="tab-btn";const b=n&&n.resourceType?`${n.resourceType}${n.id?" #"+n.id:""}`:`Resource ${a+1}`;d.textContent=b,d.setAttribute("data-for",c(a)),r.appendChild(d);const l=document.createElement("div");l.className="tab-panel",l.id=c(a);const u=document.createElement("div");u.className="panel-actions";const p=document.createElement("div");p.className="hint",p.textContent=b;const o=document.createElement("button");o.className="btn small secondary",o.textContent="JSON kopieren",o.onclick=async()=>{try{await navigator.clipboard.writeText(f(n)),o.textContent="Kopiert!",setTimeout(()=>o.textContent="JSON kopieren",1200)}catch{o.textContent="Fehler",setTimeout(()=>o.textContent="JSON kopieren",1200)}},u.appendChild(p),u.appendChild(o);const h=document.createElement("pre");h.className="json-box",h.textContent=f(n),l.appendChild(u),l.appendChild(h),s.appendChild(l)}),e.appendChild(r),e.appendChild(s);const i=n=>{Array.from(e.querySelectorAll(".tab-btn")).forEach(a=>a.classList.toggle("active",a.getAttribute("data-for")===n)),Array.from(e.querySelectorAll(".tab-panel")).forEach(a=>a.classList.toggle("active",a.id===n))};r.addEventListener("click",n=>{const a=n.target.closest(".tab-btn");a&&i(a.getAttribute("data-for"))}),t.length>0&&i("tab-0"),e.classList.remove("hidden")}(function(){const{data:e,error:r}=y(),s=m("metaLine");if(r){s.textContent=r,s.classList.add("err"),m("emptyMsg").textContent="Keine Daten zum Anzeigen.";return}const c=[];e?.meta?.generatedAt&&c.push("Erzeugt: "+new Date(e.meta.generatedAt).toLocaleString()),e?.meta?.includeObservations?c.push("Inklusive Observations"):c.push("Nur QuestionnaireResponse"),s.textContent=c.join(" | ");const i=[];if(e?.questionnaireResponse&&i.push(e.questionnaireResponse),Array.isArray(e?.observations)&&i.push(...e.observations),i.length===0){m("emptyMsg").textContent="Keine Ressourcen vorhanden.";return}C(i)})();
